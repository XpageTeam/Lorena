{"version":3,"sources":["webpack:///./src/ts/app.ts"],"names":["App","domReady","callback","document","addEventListener","e","Error","getElements","selector","elements","querySelectorAll","length","getElement","querySelector","elementsGetter","transformNodeListToArray","list","Array","prototype","slice","call","wrap","wrapper","localWrapper","createElement","HTMLElement","each","el","i","innerHTML","outerHTML","parentNode","replaceChild","_i","elements_1","console","error","exports","Element","this","_length","els","NodeList","Object","defineProperty","_els","addElement","element","concat","is","has","searchElements","isFinded","_a","_b","searchElements_1","target","contains","addClass","className","classList","add","removeClass","remove","toggleClass","hasClass","targetClass","find","searchingElements","findedElements","el_1","push","closest","EventListener","_super","__extends","event","options","trigger","evt","createEvent","initEvent","dispatchEvent","mobileMenu","settings","_state","_error","menuActiveClass","bodyActiveClass","body","_settings","burger","menu","bindEvents","text","newState","_menu","_burger","openMenu","window","matchMedia","media","matches","fixBody","style","top","pageYOffset","position","state","closeMenu","Math","abs","parseInt","scrollTo","toggleMenu","_this","MobileMenu"],"mappings":"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","file":"js/xpage.js","sourcesContent":["class App {\r\n\t/**\r\n\t * documentReady\r\n\t * @param {any} callback [description]\r\n\t */\r\n\tpublic static domReady(callback: any): void {\r\n\t\ttry{\r\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", callback)\r\n\t\t}catch(e){\r\n\t\t\tthrow Error(e)\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static getElements(selector: string): NodeList{\r\n\t\tconst elements: any = document.querySelectorAll(selector);\r\n\r\n\t\treturn elements.length ? elements : []\r\n\t\t// return this.elementsGetter(sele ctor)\r\n\t}\r\n\r\n\t/**\r\n\t* Метод получения одного объекта по селектору\r\n\t* @param selector: string\r\n\t* @return HTMLElement\r\n\t*/\r\n\tpublic static getElement(selector: string): HTMLElement{\r\n\t\tconst element: any = document.querySelector(selector);\r\n\r\n\t\treturn element\r\n\t}\r\n\r\n\tpublic static elementsGetter(selector: string): HTMLElement[]{\r\n\t\treturn App.transformNodeListToArray(document.querySelectorAll(selector))\r\n\t}\r\n\r\n\tpublic static transformNodeListToArray(list: NodeList): HTMLElement[]{\r\n\t\ttry{\r\n\t\t\treturn Array.prototype.slice.call(list)\r\n\t\t}catch(e){\r\n\t\t\tthrow Error(e)\r\n\t\t\treturn []\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static wrap(selector: any, wrapper: HTMLElement): void\r\n\tpublic static wrap(selector: any, wrapper: string): void\r\n\tpublic static wrap(selector: any, wrapper: any): void{\r\n\t\tlet localWrapper: HTMLElement;\r\n\r\n\t\tif (typeof wrapper == \"string\")\r\n\t\t\tlocalWrapper = document.createElement(wrapper)\r\n\t\telse if (wrapper instanceof HTMLElement)\r\n\t\t\tlocalWrapper = wrapper\r\n\r\n\t\t// console.log(selector, [localWrapper])\r\n\r\n\t\tApp.each(selector, function(el: HTMLElement, i:number){\r\n\t\t\tlocalWrapper.innerHTML = el.outerHTML\r\n\r\n\t\t\tel.parentNode.replaceChild(localWrapper, el)\r\n\t\t})\r\n\t}\r\n\r\n\tpublic static each(elements: string, callback: any): void\r\n\tpublic static each(elements: HTMLElement[], callback: any): void\r\n\tpublic static each(elements: NodeList, callback: any): void\r\n\tpublic static each(elements: any, callback: any): void{\r\n\r\n\t\tif (!callback){\r\n\t\t\tconsole.error(\"Callback does not exists in yours 'each'\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (typeof elements == \"string\")\r\n\t\t\telements = App.transformNodeListToArray(App.getElements(elements))\r\n\r\n\t\tlet i = 0;\r\n\r\n\t\tfor (let el of elements){\r\n\t\t\tcallback(el, i)\r\n\t\t\ti++\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass Element {\r\n\t// private _selector: string\r\n\tprotected _els: HTMLElement[]\r\n\tpublic _length: number = 0\r\n\r\n\tset els(elements: HTMLElement[]){\r\n\t\tthis._els = elements\r\n\r\n\t\tthis._length = elements.length || 0\r\n\t}\r\n\r\n\tget els(){\r\n\t\treturn this._els\r\n\t}\r\n\r\n\tget length(){\r\n\t\treturn this._length\r\n\t}\r\n\r\n\t/**\r\n\t* Создание коллекции элементов\r\n\t* @param selector: HTMLElement[] || NodeList || HTMLElement || Element || string\r\n\t* @return Element\r\n\t*/  \r\n\tconstructor (selector?: HTMLElement[])\r\n\tconstructor (selector?: HTMLElement[])\r\n\tconstructor (selector?: NodeList)\r\n\tconstructor (selector?: Element)\r\n\tconstructor (selector?: string)\r\n\tconstructor (selector?: HTMLElement)\r\n\tconstructor (selector?: any){\r\n\r\n\t\tif (!selector)\r\n\t\t\tthis.els = []\r\n\t\telse if (typeof selector == \"string\")\r\n\t\t\tthis.els = App.elementsGetter(selector)\r\n\t\telse if (selector instanceof HTMLElement)\r\n\t\t\tthis.els = [selector]\r\n\t\telse if (selector instanceof NodeList)\r\n\t\t\tthis.els = App.transformNodeListToArray(selector)\r\n\t\telse if (selector instanceof Array && (selector[0] instanceof HTMLElement || !selector.length))\r\n\t\t\tthis.els = selector\r\n\t\telse if (selector instanceof Element)\r\n\t\t\tthis.els = selector.els\r\n\t\telse\r\n\t\t\tthrow Error(`Invalid selector: ${selector}`)\r\n\t}\r\n\r\n\t/**\r\n\t * Метод добавление HTMLElemnt в экземпляр\r\n\t * класса Element\r\n\t * @param element: HTMLElement || NodeList || string || Element\r\n\t * @return Element\r\n\t */\r\n\tpublic addElement(element: Element): Element\r\n\tpublic addElement(element: NodeList): Element\r\n\tpublic addElement(element: string): Element\r\n\tpublic addElement(element: HTMLElement): Element\r\n\tpublic addElement(element: HTMLElement[]): Element\r\n\tpublic addElement(element: any): Element{\r\n\r\n\t\tif (typeof element == \"string\")\r\n\t\t\tthis.els = this.els.concat(App.elementsGetter(element))\r\n\t\telse if (element instanceof Element)\r\n\t\t\tthis.els = this.els.concat(element.els)\r\n\t\telse if (element instanceof HTMLElement)\r\n\t\t\tthis.els = this.els.concat(element)\r\n\t\telse if (element instanceof NodeList)\r\n\t\t\tthis.els = this.els.concat(App.transformNodeListToArray(element))\r\n\t\telse if (element instanceof Array && (element[0] instanceof HTMLElement || !element.length))\r\n\t\t\tthis.els = this.els.concat(element)\r\n\t\telse\r\n\t\t\tthrow Error(`Invalid selector: ${element}`)\r\n\t\treturn this\r\n\t}\r\n\r\n\r\n\t/** \r\n\t* Метод сравнения элементов\r\n\t* @param selector: HTMLElement || string\r\n\t* @return boolean\r\n\t*/\r\n\tpublic is(selector: HTMLElement): boolean\r\n\tpublic is(selector: string): boolean\r\n\tpublic is(selector: any): boolean{\r\n\t\tlet element: HTMLElement[];\r\n\r\n\t\tif (typeof selector == \"string\")\r\n\t\t\telement = App.elementsGetter(selector)\r\n\t\telse if (selector instanceof HTMLElement)\r\n\t\t\telement = [selector]\r\n\r\n\t\treturn this.els[0] == element[0]\r\n\t}\r\n\r\n\t/** Метод проверки содержания текущими элементами передаваемых\r\n\t* @param selector: Element || HTMLElement || HTMLElement[] || NodeList || string\r\n\t* @return boolean\r\n\t*/\r\n\tpublic has(selector: Element): boolean\r\n\tpublic has(selector: HTMLElement): boolean\r\n\tpublic has(selector: HTMLElement[]): boolean\r\n\tpublic has(selector: NodeList): boolean\r\n\tpublic has(selector: string): boolean\r\n\tpublic has(selector: any): boolean{\r\n\t\tlet searchElements: HTMLElement[];\r\n\r\n\t\tif (typeof selector == \"string\")\r\n\t\t\tsearchElements = App.elementsGetter(selector)\r\n\t\telse if (selector instanceof HTMLElement)\r\n\t\t\tsearchElements = [selector]\r\n\t\telse if (selector instanceof Element)\r\n\t\t\tsearchElements = selector._els\r\n\t\telse if (selector instanceof NodeList)\r\n\t\t\tsearchElements = App.transformNodeListToArray(selector)\r\n\t\telse if (selector instanceof Array && (selector[0] instanceof HTMLElement || !selector.length))\r\n\t\t\tsearchElements = selector\r\n\t\telse\r\n\t\t\tthrow Error(`Invalid selector: ${selector}`)\r\n\r\n\t\tlet isFinded: boolean = false;\r\n\r\n\t\tfor (let el of this.els){\r\n\r\n\t\t\tfor (let target of searchElements)\r\n\t\t\t\tif (el.contains(target)){\r\n\t\t\t\t\tisFinded = true\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\r\n\t\t\tif (isFinded)\r\n\t\t\t\treturn true\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\t/**\r\n\t* Назначить класс всем текущим элементам\r\n\t* @param className: string\r\n\t* @return Element\r\n\t*/\r\n\tpublic addClass(className: string): Element{\r\n\t\tApp.each(this.els, (el: HTMLElement) => {\r\n\t\t\tel.classList.add(className)\r\n\t\t})\r\n\t\treturn this\r\n\t}\r\n\r\n\t/**\r\n\t* Удалить класс у всех текущих элементов\r\n\t* @param className: string\r\n\t* @return Element\r\n\t*/\r\n\tpublic removeClass(className: string): Element{\r\n\t\tApp.each(this.els, (el: HTMLElement) => {\r\n\t\t\tel.classList.remove(className)\r\n\t\t})\r\n\t\treturn this\r\n\t}\r\n\r\n\t/**\r\n\t* Переключения класса у всех текущих элементов\r\n\t* @param className: string\r\n\t* @return Element\r\n\t*/\r\n\tpublic toggleClass(className: string, callback: Function = () => {}): Element{\r\n\t\tApp.each(this.els, (el: HTMLElement) => {\r\n\t\t\tif (el.classList.contains(className)){\r\n\t\t\t\tel.classList.remove(className)\r\n\r\n\t\t\t\tcallback(false)\r\n\t\t\t}else{\r\n\t\t\t\tel.classList.add(className)\r\n\t\t\t\tcallback(true)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn this\r\n\t}\r\n\r\n\tpublic hasClass(targetClass: string): boolean{\r\n\t\tfor (const el of this.els)\r\n\t\t\tif (el.classList.contains(targetClass))\r\n\t\t\t\treturn true\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\t/** Метод поиска потомков элемента по селектору \r\n\t* @param selector: string - селектор искомого\r\n\t* @return Element\r\n\t* */\r\n\tpublic find(selector: string): Element{\r\n\t\tlet searchingElements = new Array();\r\n\r\n\t\tApp.each(this.els, (el: HTMLElement) => {\r\n\t\t\tconst findedElements: NodeList = el.querySelectorAll(selector);\r\n\r\n\t\t\tif (!findedElements.length)\r\n\t\t\t\treturn\r\n\r\n\t\t\tfor (const el of App.transformNodeListToArray(findedElements))\r\n\t\t\t\tsearchingElements.push(el)\r\n\r\n\t\t\t// searchingElements.concat(App.transformNodeListToArray(findedElements))\r\n\r\n\t\t\t// console.log(searchingElements instanceof Array, App.transformNodeListToArray(findedElements) instanceof Array)\r\n\t\t})\r\n\r\n\t\treturn new Element(searchingElements)\r\n\t}\r\n\r\n\t/** Метод поиска родителей по селектору \r\n\t* @param selector: string\r\n\t* @return Element \r\n\t*/\r\n\tpublic closest(selector: string): Element{\r\n\t\tconst searchingElements = new Element();\r\n\r\n\t\tApp.each(this.els, (el: HTMLElement) => {\r\n\t\t\tconst findedElements: any = el.closest(selector);\r\n\r\n\t\t\tif (!findedElements)\r\n\t\t\t\treturn\r\n\r\n\t\t\tsearchingElements.addElement(findedElements);\r\n\t\t})\r\n\r\n\t\treturn searchingElements\r\n\t}\r\n}\r\n\r\ninterface EventOtions{\r\n\tcapture?: boolean,\r\n\tonce?: boolean,\r\n\tpassive?: boolean\r\n}\r\n\r\nclass EventListener extends Element{\r\n\r\n\t/** \r\n\t* Метод для подписки на событие\r\n\t* @param event: string - название js события\r\n\t* @param callback: function\r\n\t* @param options: object\r\n\t* @retrun EventListener\r\n\t*/\r\n\tpublic add(event: string, callback: any, options?: EventOtions): EventListener{\r\n\r\n\t\tApp.each(this.els, function(el:HTMLElement, i: number){\r\n\t\t\tel.addEventListener(event, function(event){\r\n\t\t\t\tcallback(this, event, i)\r\n\t\t\t}, options)\r\n\t\t})\r\n\r\n\t\treturn this\r\n\t}\r\n\r\n\t/** \r\n\t* Метод для вызова события\r\n\t* @param event: string - название js события\r\n\t* @retrun EventListener\r\n\t*/\r\n\tpublic trigger(event: string): EventListener{\r\n\t\tApp.each(this.els, function(el: HTMLElement){\r\n\t\t\tlet evt: Event = document.createEvent(\"HTMLEvents\");\r\n\r\n\t\t\tevt.initEvent(event, false, true)\r\n\t\t\tel.dispatchEvent(evt)\r\n\t\t})\r\n\r\n\t\treturn this\r\n\t}\r\n}\r\n\r\ninterface mobileMenuSettings {\r\n\tburger: string,\r\n\tmenu: string,\r\n\tmenuActiveClass: string,\r\n\tbodyActiveClass: string,\r\n\tignoreWarnings: boolean,\r\n\tfixBody: boolean,\r\n\tmedia?: string,\r\n}\r\n\r\nclass mobileMenu{\r\n\tprivate _settings: mobileMenuSettings\r\n\tprivate _burger: HTMLElement\r\n\tprivate _menu: HTMLElement\r\n\tprivate _state: boolean = false\r\n\tprivate _error: boolean = false\r\n\tprivate menuActiveClass: string = \"js__opened\"\r\n\tprivate bodyActiveClass: string = \"js__menu-opened\"\r\n\tprivate body: HTMLElement = App.getElement(\"body\")\r\n\r\n\tset error(text: string){\r\n\t\tthis._error = true\r\n\r\n\t\tconsole.error(`${text}. Меню не работает`)\r\n\t}\r\n\r\n\tset state(newState: boolean){\r\n\t\tthis._state = newState\r\n\t}\r\n\r\n\r\n\tset menu (el: HTMLElement){\r\n\t\tif (!(el instanceof HTMLElement))\r\n\t\t\tthis.error = \"Меню не найдено\"\r\n\t\telse\r\n\t\t\tthis._menu = el\r\n\t}\r\n\r\n\tset burger(el: HTMLElement){\r\n\t\tif (!(el instanceof HTMLElement))\r\n\t\t\tthis.error = \"Бургер не найден\"\r\n\t\telse\r\n\t\t\tthis._burger = el\r\n\t}\r\n\r\n\tget burger(){\r\n\t\treturn this._burger\r\n\t}\r\n\r\n\tget menu(){\r\n\t\treturn this._menu\r\n\t}\r\n\r\n\tget settings(){\r\n\t\treturn this._settings\r\n\t}\r\n\r\n\tget state(){\r\n\t\treturn this._state\r\n\t}\r\n\r\n\tconstructor(settings: mobileMenuSettings){\r\n\t\tthis._settings = settings\r\n\t\tthis.burger = App.getElement(settings.burger)\r\n\r\n\t\tthis.menu = App.getElement(settings.menu)\r\n\r\n\t\tthis.bindEvents()\r\n\t}\r\n\r\n\tpublic openMenu(): mobileMenu{\r\n\t\tif (!window.matchMedia(this.settings.media).matches)\r\n\t\t\treturn\r\n\r\n\t\tif (this.settings.fixBody){\r\n\t\t\tthis.body.style.top = -window.pageYOffset + \"px\";\r\n\t\t\tthis.body.style.position = \"fixed\";\r\n\t\t}\r\n\r\n\t\tthis.burger.classList.add(\"js__active\")\r\n\t\tthis.menu.classList.add(this.menuActiveClass)\r\n\t\tthis.body.classList.add(this.bodyActiveClass)\r\n\r\n\t\tthis.state = true\r\n\r\n\t\treturn this\r\n\t}\r\n\r\n\tpublic closeMenu(): mobileMenu{\r\n\t\tif (!window.matchMedia(this.settings.media).matches || !this.state)\r\n\t\t\treturn\r\n\r\n\t\tlet top: number = 0;\r\n\r\n\t\tif (this.settings.fixBody){\r\n\t\t\ttop = Math.abs(parseInt(this.body.style.top))\r\n\r\n\t\t\tthis.body.style.top = \"\"\r\n\t\t\tthis.body.style.position = \"\"\r\n\t\t}\r\n\r\n\t\tthis.burger.classList.remove(\"js__active\")\r\n\t\tthis.menu.classList.remove(this.menuActiveClass)\r\n\t\tthis.body.classList.remove(this.bodyActiveClass)\r\n\r\n\t\tif (this.settings.fixBody)\r\n\t\t\twindow.scrollTo(0, top)\r\n\r\n\t\tthis.state = false\r\n\r\n\t\treturn this\r\n\t}\r\n\r\n\tpublic toggleMenu(): mobileMenu{\r\n\t\tif (!window.matchMedia(this.settings.media).matches)\r\n\t\t\treturn\r\n\r\n\t\tif (this.state)\r\n\t\t\tthis.closeMenu()\r\n\t\telse\r\n\t\t\tthis.openMenu()\r\n\r\n\t\treturn this\r\n\t}\r\n\r\n\tprivate bindEvents(){\r\n\t\tdocument.addEventListener(\"click\", (event: any) => {\r\n\t\t\tconst target: Element = new Element(event.target);\r\n\t\t\t\r\n\t\t\tif(!target.is(this.burger)\r\n\t\t\t\t&& !new Element(this.burger).has(target)\r\n\t\t\t\t&& !target.is(this.menu)\r\n\t\t\t\t&& !new Element(this.menu).has(target))\r\n\t\t\t\tthis.closeMenu()\r\n\t\t})\r\n\r\n\t\tnew EventListener(this.burger).add(\"click\", (el: HTMLElement) => {\r\n\t\t\tthis.toggleMenu()\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport {App, EventListener, mobileMenu as MobileMenu, Element}"],"sourceRoot":""}